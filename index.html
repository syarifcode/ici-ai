<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#181818">
    <title>Icila AI Teman Kamu</title>
    
    <link rel="manifest" href="manifest.json">
    <link rel="icon" href="icon.png" type="image/png">

    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>

    <div id="sidebar" class="sidebar">
        <div class="sidebar-header">
            <h3>Riwayat Chat</h3>
            <button id="btnCloseSidebar" class="btn-icon"><i class="fas fa-times"></i></button>
        </div>
        
        <div id="sessionList" class="session-list"></div>

        <div class="sidebar-footer">
            <button id="btnDeleteAll" class="btn-danger">
                <i class="fas fa-trash-alt"></i> Hapus Semua Sesi
            </button>

            <div class="install-area">
                <button id="btnInstallPWA" class="btn-install hidden">
                    <i class="fas fa-download"></i> Install App
                </button>
                <a href="icila-v3.apk" download class="btn-apk">
                    <i class="fab fa-android"></i> Download APK
                </a>
            </div>

            <div class="dev-info">
                <p>Icila AI oleh <strong>SyarifCode</strong></p>
                <a href="https://instagram.com/dyat_xd" target="_blank">
                    <i class="fab fa-instagram"></i> @dyat_xd
                </a>
            </div>
        </div>
    </div>

    <div id="overlay" class="overlay"></div>

    <div id="magicMenu" class="magic-menu">
        <div class="magic-header">
            <h3>Fitur Kreatif</h3>
            <button id="btnCloseMagic" class="btn-icon"><i class="fas fa-times"></i></button>
        </div>
        <div class="magic-options">
            <button class="magic-btn" onclick="selectMagicMode('create')">
                <div class="magic-icon gen-icon"><i class="fas fa-paint-brush"></i></div>
                <div class="magic-text">
                    <h4>Buat Gambar</h4>
                    <p>Bikin gambar dari teks (Flux)</p>
                </div>
            </button>
            
            <button class="magic-btn" onclick="selectMagicMode('edit')">
                <div class="magic-icon edit-icon"><i class="fas fa-magic"></i></div>
                <div class="magic-text">
                    <h4>Edit Gambar</h4>
                    <p>Ubah foto pakai prompt</p>
                </div>
            </button>

            <button class="magic-btn reset-mode" onclick="selectMagicMode('chat')">
                <div class="magic-icon chat-icon"><i class="fas fa-comment-alt"></i></div>
                <div class="magic-text">
                    <h4>Chat Normal</h4>
                    <p>Kembali ngobrol sama Icila</p>
                </div>
            </button>
        </div>
    </div>

    <div class="main-container">
        
        <div class="header">
            <div class="header-left">
                <button id="btnOpenSidebar" class="btn-icon">
                    <i class="fas fa-bars"></i>
                </button>
                <div class="bot-info">
                    <h2>Icila V3</h2>
                    <span class="status-indicator"></span>
                </div>
            </div>
            <button id="btnNewChatHeader" class="btn-icon" title="Chat Baru">
                <i class="fas fa-edit"></i>
            </button>
        </div>

        <div id="chatBox" class="chat-box">
            <div id="welcomeMessage" class="welcome-screen">
                <h1 class="glow-text">Icila AI</h1>
                <p>Mode: <strong>PRO</strong></p>
            </div>
        </div>

        <div id="imagePreviewContainer" class="image-preview hidden">
            <div class="preview-card">
                <img id="imagePreview" src="" alt="Preview">
                <button id="btnRemoveImage" class="btn-close-img"><i class="fas fa-times"></i></button>
            </div>
            <p class="upload-status" id="uploadStatus">Siap dikirim...</p>
        </div>

        <div id="modeIndicator" class="mode-indicator hidden">
            <span id="modeText">Mode: Buat Gambar ðŸŽ¨</span>
            <button id="btnCancelMode"><i class="fas fa-times"></i></button>
        </div>

        <div class="input-area stacked">
            <input type="file" id="fileInput" accept="image/*" hidden>
            
            <textarea id="userInput" placeholder="Ketik pesan..." rows="1"></textarea>
            
            <div class="input-toolbar">
                <div class="toolbar-left">
                    <button id="btnUpload" class="btn-tool" title="Upload Foto">
                        <i class="fas fa-camera"></i>
                    </button>
                    <button id="btnMagic" class="btn-tool magic-trigger" title="Fitur Gambar">
                        <i class="fas fa-sliders-h"></i>
                    </button>
                </div>
                
                <div class="toolbar-right">
                    <button id="btnModeSwitch" class="mode-badge mode-pro">Pro</button>
                    <button id="btnSend" class="btn-send-round">
                        <i class="fas fa-paper-plane"></i>
                    </button>
                </div>
            </div>
        </div>

    </div>

    <script src="api_service.js"></script>
    <script src="image_features.js"></script>
    <script src="script.js"></script>
</body>
</html>
